:root{
  --bg:#f7f7fb; --ink:#25303b; --muted:#6b7a8c;
  --card:#ffffff; --line:#e7e9ee; --acc:#2563eb;
  --green:#22c55e; --yellow:#f59e0b; --red:#ef4444;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.4 system-ui,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial}

.topbar{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid var(--line);background:#fff;position:sticky;top:0;z-index:10}
.brand{display:flex;align-items:center;gap:8px}
.logo{font-size:20px}
.brand-txt small{display:block;color:var(--muted);margin-top:-4px}

.kpis{display:grid;gap:8px}
.kpis-finca{grid-template-columns:repeat(6,minmax(120px,1fr));max-width:68vw}
.kpis-potrero{grid-template-columns:repeat(6,minmax(110px,1fr));padding:8px 12px;border-bottom:1px solid var(--line);background:#fff}
.kpi{background:var(--card);border:1px solid var(--line);border-radius:10px;padding:6px 8px;display:flex;flex-direction:column}
.kpi-label{font-size:12px;color:var(--muted)}
.kpi-value{font-weight:700;font-size:18px;margin-top:2px}

.toolbar{padding:8px 12px;border-bottom:1px solid var(--line);background:#fff}
.toolbar .row{display:flex;flex-wrap:wrap;gap:8px;align-items:end}
.toolbar label{display:block;font-size:12px;color:var(--muted)}
.toolbar input,.toolbar select{padding:6px 8px;border:1px solid var(--line);border-radius:8px;min-width:120px}
.btn{padding:8px 10px;border:1px solid var(--line);background:#fff;border-radius:10px;cursor:pointer}
.btn.secondary{background:#f3f7ff;border-color:#d7e3ff;color:#274cdb}

.main{display:grid;grid-template-columns:minmax(420px,58%) minmax(380px,42%);gap:10px;align-items:start;padding:10px;height:calc(100vh - 190px)}
#map{background:#eaeef4;border:1px solid var(--line);border-radius:12px;min-height:72vh;max-height:72vh}
.side{height:72vh;overflow:auto;display:flex;flex-direction:column;gap:10px}

.card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:8px}
.card-header{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--line);padding:4px 2px 8px 2px;margin-bottom:8px}
.chart-wrap{height:320px}

.panel{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:8px}
.table-wrap{max-height:360px;overflow:auto;border:1px solid var(--line);border-radius:8px}
table.rank{width:100%;border-collapse:collapse}
.rank th,.rank td{border-bottom:1px solid var(--line);padding:6px 8px;text-align:center;font-size:12px}
.rank th{position:sticky;top:0;background:#fff;z-index:1}

.badge{padding:2px 6px;border-radius:8px;border:1px solid var(--line);font-size:12px}
.badge.ok{background:#ecfdf5;color:#065f46;border-color:#bbf7d0}
.badge.no{background:#fef2f2;color:#991b1b;border-color:#fecaca}
.state{padding:2px 8px;border-radius:8px;color:#fff}
.state.green{background:var(--green)} .state.yellow{background:var(--yellow)} .state.red{background:var(--red)}

.pastoreo-dynamic{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.pill{display:inline-block;background:#f6f7fb;border:1px solid var(--line);border-radius:999px;padding:4px 8px;margin-bottom:6px}
.pill.state-green{background:#e8fff0;border-color:#c9f7d7}
.chips{display:flex;flex-wrap:wrap;gap:6px}
.chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:6px 8px;background:#fff;cursor:pointer}
.chip small{color:var(--muted)}

.legend{background:#fff;border:1px solid var(--line);border-radius:10px;padding:8px;box-shadow:0 6px 18px rgba(0,0,0,.05)}
.legend .item{display:flex;align-items:center;gap:6px;font-size:12px;margin:2px 0}
.legend .sw{display:inline-block;width:16px;height:10px;border-radius:3px;border:1px solid var(--line)}

.map-label{background:transparent;border:0 !important;box-shadow:none !important;color:#2b3643;font-weight:700;text-shadow:0 1px 0 #fff;}

@media (max-width: 1100px){
  .main{grid-template-columns:1fr; height:auto}
  #map{min-height:48vh;max-height:52vh}
  .side{height:auto}
}
